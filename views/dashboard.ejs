<!DOCTYPE html>
<html lang="en">
<%- include('partials/head') %>

    <body>
        <%- include('partials/header_dashboard') %>
           

            <div class="container userCard">

                <img class="userIcon" src="/img/user-icon-on-transparent-background-free-png.webp">
                <button class="button" type="button" onclick="openModal('logout-modal')">Logout</button>
                <h1>Welcome, <%= user.username %>!</h1>
                <p>Welcome to your account settings! Here, you can update both your username and password effortlessly.
                    Keep your account secure and personalized by making changes that suit you best. Enter your new
                    details, confirm, and enjoy a seamless experience tailored to your preferences.</p>
                <form action="/update-credentials" method="post">
                    <input class="footer_input" type="text" name="username" placeholder="New Username">
                    <input class="footer_input" type="password" name="password" placeholder="New Password">
                    <button class="button" type="button" onclick="openModal('update-modal')"
                        style="margin-bottom: 0;">Update</button>
                </form>

                <div class="delete_card2">
                    <p>If you've decided to part ways, you can easily delete your account here. Click the button below
                        to proceed with account deletion. Rest assured, this action is irreversible, so make sure it's
                        what you truly want before confirming.</p>
                    <button class="button_delete" type="button" onclick="openModal('delete-modal')">Delete
                        Account</button>
                </div>

               
            </div>

            <!-- Modals -->
            <div id="update-modal" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="closeModal('update-modal')">&times;</span>
                    <p>Are you sure you want to update your credentials?</p>
                    <form>
                    <button class="button" type="button" onclick="document.forms[0].submit()">Yes</button>
                    <button class="button_delete" type="button" onclick="closeModal('update-modal')">No</button>
                </form>
                </div>
            </div>

            <div id="delete-modal" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="closeModal('delete-modal')">&times;</span>
                    <p>Are you sure you want to delete your account? This action cannot be undone.</p>
                    <form action="/delete-account" method="post">
                        <button class="button_delete" type="submit">Yes</button>
                        <button class="button" type="button" onclick="closeModal('delete-modal')">No</button>
                    </form>
                </div>
            </div>

            <div id="logout-modal" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="closeModal('logout-modal')">&times;</span>
                    <p>Are you sure you want to logout?</p>
                    <form>
                    <button class="button"  type="button" onclick="window.location.href='/logout'">Yes</button>
                    <button class="button_delete" type="button" onclick="closeModal('logout-modal')">No</button>
                </form>
                </div>
            </div>

            <style>
                /* Modal styling */
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }

                .modal-content {
                    background-color: #fefefe;
                    margin: 15% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                    max-width: 500px;
                }

                .close {
                    color: #aaa;
                    float: right;
                    font-size: 28px;
                    font-weight: bold;
                }

                .close:hover,
                .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
            </style>

            <%- include('partials/footer') %>

                <%- include('partials/scripts') %>

                <script>
                    // JavaScript for modals
                    function openModal(modalId) {
                        document.getElementById(modalId).style.display = "block";
                    }

                    function closeModal(modalId) {
                        document.getElementById(modalId).style.display = "none";
                    }

                    // Close the modal when clicking outside of it
                    window.onclick = function (event) {
                        const modals = document.getElementsByClassName('modal');
                        for (let i = 0; i < modals.length; i++) {
                            if (event.target === modals[i]) {
                                modals[i].style.display = "none";
                            }
                        }
                    }
                </script>
    </body>

</html>